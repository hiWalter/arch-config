"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[400],{16058:(e,t,s)=>{s.d(t,{Z:()=>x});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(68268),m=s(75939),u=s(99214),h=s(54007),g=s(30873),f=s(73947),S=s(24708),_=s(5489),v=s(11678),b=s(61149),y=s(68195),w=s(94639),M=s(78735),P="object"==typeof s.g?s.g:window;P.performance&&P.performance.mark&&P.performance.mark("src_client_components_AppearanceSettings_tsx_start");const Z=["system","light","dark"],k=(0,c.vU)({systemLabel:{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"},lightLabel:{id:"appearanceSetting.light.label",defaultMessage:"Light"},darkLabel:{id:"appearanceSetting.dark.label",defaultMessage:"Dark"}});class C extends g.Z{constructor(...e){super(...e),l()(this,"storeTypes",{appearanceStore:M.Z}),l()(this,"handleChangeAppearance",(e=>{(0,w.rz)(this.environment,e),this.stores.appearanceStore.setState({appearanceSetting:e})}))}didMount(){const e=(0,w.MH)(this.environment);this.stores.appearanceStore.setState({appearanceSetting:e})}renderComponent(){return i()("div",{},void 0,this.renderHeader(),i()("div",{style:this.getSettingsOptionStyle()},void 0,i()(y.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,i()(c._H,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."})),this.renderAppearanceButton()))}renderHeader(){const{device:e}=this.environment;return i()(b.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},void 0,i()(c._H,{id:"appearanceSettings.title",defaultMessage:"Appearance"}))}renderAppearanceButton(){const{device:e}=this.environment;return i()(u.Z,{popupType:e.isMobile?u.Z.PopupType.SlideUp:u.Z.PopupType.Popup,placementToOrigin:u.Z.Placement.Right,renderOrigin:e=>p().createElement(_.Z,o()({},e,{isLarge:!0,style:{marginTop:12,marginBottom:4}}),C.getAppearanceLabel(this.stores.appearanceStore.state.appearanceSetting),m.Z.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),render:t=>{let s;s=e.isMobile?{menuType:f.ZP.MenuType.Modal,title:i()(c._H,{defaultMessage:"Appearance",id:"appearanceSettings.modal.title"}),right:i()(c._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:f.ZP.MenuType.Popup,width:250};const r=Z.map((e=>({key:e,action:s=>{this.handleChangeAppearance(e),t.close()},render:(t,s)=>p().createElement(h.Z,o()({},t,{title:C.getAppearanceLabel(e)}))})));return p().createElement(f.ZP,s,i()(S.Z,{type:S.Z.Type.Vertical,sections:[{key:"appearance section",render:e=>p().createElement(v.Z,e),items:r}],initialFocus:void 0}))}})}static getAppearanceLabel(e){switch(e){case"light":return p().createElement(c._H,k.lightLabel);case"dark":return p().createElement(c._H,k.darkLabel);case"system":return p().createElement(c._H,k.systemLabel)}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const x=C;P.performance&&P.performance.mark&&P.performance.mark("src_client_components_AppearanceSettings_tsx_end"),P.performance&&P.performance.measure&&P.performance.measure("src_client_components_AppearanceSettings_tsx","src_client_components_AppearanceSettings_tsx_start","src_client_components_AppearanceSettings_tsx_end")},34740:(e,t,s)=>{s.d(t,{Z:()=>m});var r=s(52264),o=s.n(r),n=(s(54651),s(68268)),i=s(30873),a=s(61149),l=s(33101),d=s(68195),p="object"==typeof s.g?s.g:window;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_CalendarSettings_tsx_start");class c extends i.Z{renderComponent(){const{device:e}=this.environment;return o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(a.Z,{},void 0,o()(n._H,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"})),o()("div",{onClick:this.props.onClick,style:{display:"flex",alignItems:"flex-start",marginBottom:12,cursor:"pointer",width:"100%"}},void 0,o()("div",{style:{flex:1}},void 0,o()(d.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,o()(n._H,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}))),o()("div",{style:{marginTop:5}},void 0,o()(l.Z,{on:1===this.props.startDayOfWeek,isAndroid:e.isAndroid}))))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const m=c;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_CalendarSettings_tsx_end"),p.performance&&p.performance.measure&&p.performance.measure("src_client_components_CalendarSettings_tsx","src_client_components_CalendarSettings_tsx_start","src_client_components_CalendarSettings_tsx_end")},83982:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(52264),o=s.n(r),n=(s(54651),s(68268)),i=s(54966),a=s(35160),l=s(68195),d="object"==typeof s.g?s.g:window;d.performance&&d.performance.mark&&d.performance.mark("src_client_components_CellMemberAvatar_tsx_start");const p=function(e){const t=(0,n.YB)(),{userValue:s,containerStyle:r}=e;return s?o()("div",{style:{display:"flex",alignItems:"center",maxWidth:300,...r}},void 0,o()(a.Z,{userValue:s,size:28}),o()("div",{style:{minWidth:0,marginLeft:6,marginRight:6}},void 0,o()(l.Z,{className:"notranslate"},void 0,(0,i.Nz)(t,s)),o()(l.Z,{isSmall:!0},void 0,s.email))):null};d.performance&&d.performance.mark&&d.performance.mark("src_client_components_CellMemberAvatar_tsx_end"),d.performance&&d.performance.measure&&d.performance.measure("src_client_components_CellMemberAvatar_tsx","src_client_components_CellMemberAvatar_tsx_start","src_client_components_CellMemberAvatar_tsx_end")},96781:(e,t,s)=>{s.d(t,{mS:()=>H,Ub:()=>G,Pp:()=>R});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=(s(62537),s(54651)),l=s.n(a),d=s(70864),p=s(17421),c=s(24708),m=s(11678),u=s(99214),h=s(85340),g=s(75939),f=s(78637),S=s(73947),_=s(68268),v=s(54007),b=s(68646),y=s(61149),w=s(68195),M=s(74621),P=s(5489),Z=s(51095),k=s(1879),C=s(92051),x=s(56225),T=s.n(x),B=s(7605),I="object"==typeof s.g?s.g:window;I.performance&&I.performance.mark&&I.performance.mark("src_client_components_ExperimentSettings_tsx_start");const L="janus";function H(e){return"production"!==B.Z.env&&("on"===p.Z.getGroup(L)||"local"===B.Z.env)}function G(e){const t=(0,h.O7)(),[s,r]=(0,a.useState)(""),[n,Z]=(0,a.useState)(void 0),k=(0,d.VK)((()=>p.Z.getExperiments().filter((e=>e.experimentId!==L&&(!s||0===s.length||e.experimentId.includes(s)))).sort(((e,t)=>e.experimentId>t.experimentId?1:-1))),[s]),{device:x}=t,B=x.isMobile,I=(0,f.y)((e=>({containerStyle:{width:"100%"},headerContainerStyle:{display:"flex",alignItems:"flex-start",cursor:"pointer",width:"100%",flexWrap:"wrap"},headerLabelStyle:{marginTop:2,marginBottom:12,padding:2,flex:1},filterContainerStyle:{paddingBottom:"12px"},resetButtonContainerStyle:{paddingBottom:"12px"},tableExperimentIDHeaderStyle:{width:"auto"},tableExperimentGroupHeaderStyle:{width:"auto",textAlign:"right"},experimentGroupContainerStyle:{width:"100%",display:"flex",justifyContent:"flex-end"},experimentGroupButtonStyle:{maxWidth:B?"100px":void 0,overflowX:"hidden",justifyContent:"left"},experimentGroupButtonChevronStyle:{width:10,marginLeft:4,fill:e.lightIconColor},experimentGroupButtonCheckContainerStyle:{width:B?16:14}})),[B]);return i()("div",{style:I.containerStyle},void 0,i()(y.Z,{large:!x.isMobile||void 0},void 0,"Experiment Overrides"),i()("div",{style:I.headerContainerStyle},void 0,i()(w.Z,{isSmall:!0,isMultiline:!0,style:I.headerLabelStyle},void 0,"Turn on (or off) experiments for yourself. This only works for experiments that are based on userId or deviceId"),i()("div",{style:I.resetButtonContainerStyle},void 0,i()(P.Z,{isSmall:!0,onClick:()=>{Z({reset:!0}),p.Z.resetExperimentOverrides(t).then((()=>{Z(void 0)}))}},void 0,null!=n&&n.reset?i()(C.Z,{}):"Reset to defaults"))),i()("div",{style:I.filterContainerStyle},void 0,i()(M.Z,{placeholder:"Filter by Experiment ID...",value:s,showClearButton:!0,autoCapitalize:"off",autoComplete:"off",onChange:e=>{r(e.target.value)}})),i()(b.Z,{columns:[{key:"name",header:"Experiment ID",style:I.tableExperimentIDHeaderStyle},{key:"group",header:"Group",style:I.tableExperimentGroupHeaderStyle}],rows:k.map((e=>{const s=e.group;return{key:e.experimentId,columns:[e.experimentId,i()("div",{style:I.experimentGroupContainerStyle},void 0,i()(u.Z,{popupType:x.isMobile?u.Z.PopupType.SlideUp:u.Z.PopupType.Popup,renderOrigin:t=>l().createElement(P.Z,o()({},t,{key:e.experimentId,style:I.experimentGroupButtonStyle}),null!=s?s:"unknown",g.Z.chevronDown(I.experimentGroupButtonChevronStyle)),render:r=>{let a;a=x.isMobile?{menuType:S.ZP.MenuType.Modal,title:e.experimentId,right:i()(_._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:r.close}:{menuType:S.ZP.MenuType.Popup,width:250};const d=e.groups.map((a=>({key:a,action:s=>{Z({experimentId:e.experimentId,group:a}),p.Z.setExperimentOverride(t,e.experimentId,a).then((()=>{Z(void 0),T().delay((()=>{r.close()}),1e3)}))},render:(t,r)=>l().createElement(v.Z,o()({},t,{title:a,right:n&&n.experimentId===e.experimentId&&n.group===a?i()("div",{style:I.experimentGroupButtonCheckContainerStyle},void 0,i()(C.Z,{})):a!==s||n?void 0:i()("div",{style:I.experimentGroupButtonCheckContainerStyle},void 0,g.Z.check())}))})));return l().createElement(S.ZP,a,i()(c.Z,{type:c.Z.Type.Vertical,initialFocus:void 0,sections:[{key:e.experimentId,render:e=>l().createElement(m.Z,e),items:d}]}))}}))]}}))}))}function R(e){const t=(0,f.y)((e=>({headerLabelStyle:{marginTop:2,width:"80%"},outlineButtonStyle:{marginTop:12,marginBottom:4}})),[]);return i()("div",{},void 0,i()(y.Z,{},void 0,"Experiments"),i()(w.Z,{isSmall:!0,isMultiline:!0,style:t.headerLabelStyle},void 0,"Locally turn on (or off) experiments"),i()(u.Z,{popupType:u.Z.PopupType.SlideUp,renderOrigin:e=>l().createElement(P.Z,o()({},e,{isLarge:!0,style:t.outlineButtonStyle}),"View Experiments"),render:e=>{const t={menuType:S.ZP.MenuType.Modal,whiteBackground:!0,title:"Experiments",right:i()(_._H,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:e.close};return i()(k.Z,{capture:!0,allowEsc:!0,render:()=>l().createElement(S.ZP,t,i()(Z.Z,{disableScroller:!0},void 0,i()(G,{})))})}}))}I.performance&&I.performance.mark&&I.performance.mark("src_client_components_ExperimentSettings_tsx_end"),I.performance&&I.performance.measure&&I.performance.measure("src_client_components_ExperimentSettings_tsx","src_client_components_ExperimentSettings_tsx_start","src_client_components_ExperimentSettings_tsx_end")},12693:(e,t,s)=>{s.d(t,{Z:()=>m});var r=s(52264),o=s.n(r),n=(s(54651),s(30873)),i=s(30944),a=s(75939),l=s(24475),d=s(77365),p="object"==typeof s.g?s.g:window;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_HelpButtonSettingsCaption_tsx_start");class c extends n.Z{renderComponent(){return o()(i.Z,{style:{display:"flex",marginLeft:-6},className:"notion-print-ignore",href:this.props.href,external:!0,onClick:()=>l.Fsx(this.environment,{from:this.props.analyticsFrom})},void 0,o()(d.Z,{icon:a.Z.help,isSmall:!0,isLightGray:!0,shouldShrink:this.props.shouldShrink},void 0,this.props.title))}}const m=c;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_HelpButtonSettingsCaption_tsx_end"),p.performance&&p.performance.measure&&p.performance.measure("src_client_components_HelpButtonSettingsCaption_tsx","src_client_components_HelpButtonSettingsCaption_tsx_start","src_client_components_HelpButtonSettingsCaption_tsx_end")},91304:(e,t,s)=>{s.d(t,{Z:()=>A});var r=s(52264),o=s.n(r),n=s(12662),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(99214),m=s(30873),u=s(81407),h=s(39065),g=s(24475),f=s(93132),S=s(39748),_=s(75939),v=s(24708),b=s(73947),y=s(11678),w=s(53087),M=s(22765),P=s(13381),Z=s(32823),k=s(7924),C=s(20918),x=s(56364),T=s(96768),B=s(21651),I=s(60191),L=s(68268),H=s(63968),G="object"==typeof s.g?s.g:window;G.performance&&G.performance.mark&&G.performance.mark("src_client_components_HighlightSelectionButton_tsx_start");const R=p().Fragment;class E extends m.Z{constructor(...e){super(...e),l()(this,"storeTypes",{ignoreSelectionAreaStore:x.Z}),l()(this,"renderHighlightColorMenuItem",((e,t,s,r)=>({key:t||e,action:()=>{s(),this.menuItemAction(e),r.close()},render:s=>p().createElement(P.Z,i()({},s,{color:e,overrideDisplayName:t}))}))),l()(this,"handleToggleHighlightAnnotation",(()=>{w.aS({environment:this.environment,annotation:["h",k.Z.state.color]}),g.mt_(this.environment,{action:"h",color:k.Z.state.color})})),l()(this,"handleButtonPopupClick",(e=>{g.mt_(this.environment,{action:"h"})})),l()(this,"handleClose",(()=>{S.Z.emit()})),l()(this,"menuItemAction",(e=>{w.mX({environment:this.environment,annotationType:"h"}),"default"!==e&&(k.Z.setHighlightColor(e),this.handleToggleHighlightAnnotation())}))}renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return o()(c.Z,{popupType:e.isMobile?c.Z.PopupType.SlideUp:c.Z.PopupType.Popup,originGap:4,onClose:this.handleClose,onClick:this.handleButtonPopupClick,renderOrigin:t=>o()(u.Z,{renderTooltip:()=>o()(R,{},void 0,o()("div",{},void 0,o()(L._H,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),o()("div",{},void 0,o()(B.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleHighlight"}))),render:s=>p().createElement(f.Z,i()({style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",...this.props.style},disabled:this.props.disabled,disabledFeedback:this.props.disabled},(0,h.Z)(t,s)),o()("div",{style:this.getColorIconStyle()},void 0,e.isMobile?o()(L._H,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),_.Z.chevronDown({width:10,marginLeft:e.isMobile?4:3,fill:"dark"===this.theme.mode?M.ZP.white:this.theme.lightIconColor}))}),render:s=>{let r;return r=e.isMobile?{menuType:b.ZP.MenuType.Modal,title:o()(L._H,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:o()(H.CancelMenuText,{}),onClickRight:()=>{s.close()}}:{menuType:b.ZP.MenuType.Popup},p().createElement(b.ZP,r,o()(C.Z,{capture:e.isMobile,store:this.stores.ignoreSelectionAreaStore,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:e=>{const r=M.CY.map((t=>this.renderHighlightColorMenuItem(t,void 0,e,s))),n=[this.renderHighlightColorMenuItem("default",t.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),e,s),...M._K.map((t=>this.renderHighlightColorMenuItem(t,void 0,e,s)))],a=k.Z.state.color;return o()(v.Z,{type:v.Z.Type.Vertical,sections:[{key:0,items:[{key:0,action:()=>{e(),this.menuItemAction(a),s.close()},render:e=>p().createElement(P.Z,i()({},e,{color:a,shortcuts:["toggleHighlight"]}))}],render:e=>p().createElement(y.Z,i()({},e,{title:o()(L._H,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:r,render:e=>p().createElement(y.Z,i()({},e,{title:o()(L._H,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:n,render:e=>p().createElement(y.Z,i()({},e,{title:o()(L._H,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],initialFocus:void 0})}}))}})}getTextSelectionColor(){const e=(0,I.Ld)("h");return e?T.zI(e):"default"}getColorIconStyle(){const{device:e}=this.environment;return{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!e.isMobile&&{width:18,fontWeight:Z.Z.fontWeight.medium,marginBottom:2},...(0,M.A_)(this.getTextSelectionColor(),this.theme)}}}const A=(0,L.XN)(E);G.performance&&G.performance.mark&&G.performance.mark("src_client_components_HighlightSelectionButton_tsx_end"),G.performance&&G.performance.measure&&G.performance.measure("src_client_components_HighlightSelectionButton_tsx","src_client_components_HighlightSelectionButton_tsx_start","src_client_components_HighlightSelectionButton_tsx_end")},96981:(e,t,s)=>{s.d(t,{Z:()=>w});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(99274),m=s(30873),u=s(81407),h=s(21651),g=s(75939),f=s(24475),S=s(39748),_=s(93132),v=s(68268),b="object"==typeof s.g?s.g:window;b.performance&&b.performance.mark&&b.performance.mark("src_client_components_InlineCommentButton_tsx_start");class y extends m.Z{constructor(...e){super(...e),l()(this,"handleClick",(e=>{const t=S.Z.state;"editing"===t.mode&&c.WD({environment:this.environment,blockStore:this.props.blockStore,multiSelection:t.multiSelection}),f.mt_(this.environment,{action:"comment"})}))}renderComponent(){const{device:e}=this.environment,t=e.isMobile;return i()(u.Z,{renderTooltip:()=>i()(d.Fragment,{},void 0,i()("div",{},void 0,i()(v._H,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})),i()("div",{},void 0,i()(h.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"comment"}))),render:e=>p().createElement(_.Z,o()({style:{display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap",...this.props.style},disabled:this.props.disabled,disabledFeedback:this.props.disabled,onClick:this.handleClick},e),g.Z.speechBubbleThin({width:t?18:16,height:t?18:16,marginTop:t?0:1,marginRight:4}),!t&&i()(v._H,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"}))})}}const w=y;b.performance&&b.performance.mark&&b.performance.mark("src_client_components_InlineCommentButton_tsx_end"),b.performance&&b.performance.measure&&b.performance.measure("src_client_components_InlineCommentButton_tsx","src_client_components_InlineCommentButton_tsx_start","src_client_components_InlineCommentButton_tsx_end")},58647:(e,t,s)=>{s.d(t,{Z:()=>y});var r=s(52264),o=s.n(r),n=s(54651),i=s.n(n),a=s(30873),l=s(21730),d=s(33101),p=s(11360),c=s(37757),m=s(24475),u=s(63132),h=s(12693),g=s(68195),f=s(68268),S=s(14611),_=s(61149),v="object"==typeof s.g?s.g:window;v.performance&&v.performance.mark&&v.performance.mark("src_client_components_NotificationSettings_tsx_start");class b extends a.Z{renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return o()("div",{},void 0,this.renderNotificationHeader(),o()("div",{style:this.getSettingsOptionStyle(),className:"notifications-settings"},void 0,this.renderSettingsOption(t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.title",defaultMessage:"Mobile push notifications"}),t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app."}),"notify_mobile"),e.isElectron&&o()(n.Fragment,{},void 0,o()(l.Z,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"}),t.formatMessage({id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately via your desktop app."}),"notify_desktop")),o()(l.Z,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"}),t.formatMessage({id:"notificationSettings.emailNotificationSettings.description",defaultMessage:"Receive email updates on mentions, comments, and edit digests for all the pages you have followed."}),"notify_email"),this.getSwitchValue("notify_email")&&o()(i().Fragment,{},void 0,o()(l.Z,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"}),t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you’re active on the app."}),"notify_email_always")),o()(l.Z,{size:24}),o()("div",{style:{marginTop:4}},void 0,o()(h.Z,{title:t.formatMessage({id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about mobile and desktop notifications"}),href:(0,S.UY)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))))}renderNotificationHeader(){const{device:e}=this.environment;return o()(_.Z,{large:!e.isMobile||void 0,divider:"full"},void 0,o()(f._H,{id:"notificationSettings.notificationSection.title",defaultMessage:"Notifications"}))}renderSettingsOption(e,t,s){const{device:r}=this.environment,n=this.getSwitchValue(s);return o()("div",{onClick:()=>{this.handleToggle(s),"notify_mobile"===s?m.lyF(this.environment,{is_on:!n}):"notify_desktop"===s?m.ZL0(this.environment,{is_on:!n}):("notify_email"===s||"notify_email_always"===s)&&m.b0T(this.environment,{is_on:!n})},style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"}},void 0,o()("div",{style:{flex:1}},void 0,o()("div",{style:{fontSize:14}},void 0,e),o()(g.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginTop:4}},void 0,t)),o()(d.Z,{on:Boolean(n),disabled:void 0===n,isAndroid:r.isAndroid}))}getSwitchValue(e){const{currentSpaceViewStore:t}=u.Z.state;if(t){const s=t.getValue();if(s)return s[e]}}handleToggle(e){const{currentSpaceViewStore:t}=u.Z.state;if(t){const s=t.getValue();if(s){const r=s[e];c.H5(this.environment,(s=>{p.sW({store:t,data:{[e]:!r},transaction:s})}))}}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const y=(0,f.XN)(b);v.performance&&v.performance.mark&&v.performance.mark("src_client_components_NotificationSettings_tsx_end"),v.performance&&v.performance.measure&&v.performance.measure("src_client_components_NotificationSettings_tsx","src_client_components_NotificationSettings_tsx_start","src_client_components_NotificationSettings_tsx_end")},98902:(e,t,s)=>{s.d(t,{Z:()=>G});var r=s(52264),o=s.n(r),n=s(43629),i=s.n(n),a=(s(62537),s(54651)),l=s(68268),d=s(86165),p=s(30873),c=s(41851),m=s(63132),u=s(11425),h=s(54399),g=s(36183),f=s(82794),S=s(78293),_=s(74621),v=s(5489),b=s(95683),y=s(64824),w=s(22765),M=s(68195),P=s(86272),Z=s(1879),k=s(56225),C=s.n(k),x="object"==typeof s.g?s.g:window;x.performance&&x.performance.mark&&x.performance.mark("src_shared_passwordHelpers_ts_start"),x.performance&&x.performance.mark&&x.performance.mark("src_shared_passwordHelpers_ts_end"),x.performance&&x.performance.measure&&x.performance.measure("src_shared_passwordHelpers_ts","src_shared_passwordHelpers_ts_start","src_shared_passwordHelpers_ts_end");var T=s(61149),B=s(74006),I=s(24475),L="object"==typeof s.g?s.g:window;L.performance&&L.performance.mark&&L.performance.mark("src_client_components_PasswordSettings_tsx_start");class H extends p.Z{constructor(...e){super(...e),i()(this,"storeTypes",{hasPasswordStore:c.Z.of(!1),emailStore:c.Z.of("")}),i()(this,"handleChangePasswordClick",(()=>{I.Wbl(this.environment),u.Z.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:""})})),i()(this,"handleOldPasswordChange",(e=>{(u.Z.isSetNewPasswordModal()||u.Z.isRemovePasswordModal())&&u.Z.setState({...u.Z.state,oldPassword:e.target.value,alert:void 0})})),i()(this,"handleClearOldPassword",(()=>{(u.Z.isSetNewPasswordModal()||u.Z.isRemovePasswordModal())&&u.Z.setState({...u.Z.state,oldPassword:"",alert:void 0})})),i()(this,"handlePasswordChange",(e=>{u.Z.isSetNewPasswordModal()&&u.Z.setState({...u.Z.state,password:e.target.value,alert:void 0})})),i()(this,"handleCancelChangePassword",(()=>{const{onCancel:e}=u.Z.state;u.Z.reset(),e&&e()})),i()(this,"handleClearPassword",(()=>{u.Z.isSetNewPasswordModal()&&u.Z.setState({...u.Z.state,password:"",repeatPassword:"",alert:void 0})})),i()(this,"handleRepeatPasswordChange",(e=>{u.Z.isSetNewPasswordModal()&&u.Z.setState({...u.Z.state,repeatPassword:e.target.value,alert:void 0})})),i()(this,"handleClearRepeatPassword",(()=>{u.Z.isSetNewPasswordModal()&&u.Z.setState({...u.Z.state,repeatPassword:"",alert:void 0})})),i()(this,"handlePasswordBlur",(()=>{if(u.Z.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=u.Z.state;e&&t&&e!==t&&u.Z.setState({...u.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})})}})),i()(this,"handleSubmit",(async()=>{if(!u.Z.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=u.Z.state,r=this.stores.hasPasswordStore.get(),{intl:o}=this.props;let n;if(r&&!e)n=o.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=function(e){if(C().uniq(e).length<=3)return{success:!1,reason:{type:"password_too_consistent"}};if(e.length>=15)return{success:!0};if(e.length<8)return{success:!1,reason:{type:"password_too_short"}};const t=function(e){return e.match(/[a-z]/i)}(e),s=function(e){return e.match(/\d/)}(e);return t&&s?{success:!0}:t||s?s?t?{success:!1,reason:{type:"password_too_short"}}:{success:!1,reason:{type:"password_missing_letter"}}:{success:!1,reason:{type:"password_missing_number"}}:{success:!1,reason:{type:"password_missing_letter_and_number"}}}(t);e.success?s?t!==s&&(n=o.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):n=o.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):n=this.getPasswordErrorMessage(e.reason)}else n=o.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(n)return void u.Z.setState({...u.Z.state,alert:n});const i=await h.FY6(this.environment,{oldPassword:e,newPassword:t});if("success"===i.type)this.props.requestStore.refresh(),void 0===e?this.saveNewPasswordSuccess():this.changePasswordSuccess();else{const e=(0,B.wf)(this.props.intl,i);u.Z.setState({...u.Z.state,alert:e})}})),i()(this,"handleShowRemovePasswordModalClick",(()=>{u.Z.setState({open:!0,removePassword:!0,oldPassword:""})})),i()(this,"handleRemovePasswordClick",(async()=>{if(!u.Z.isRemovePasswordModal())return;const{oldPassword:e}=u.Z.state;if(I.wrY(this.environment),!e)return void u.Z.setState({...u.Z.state,alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password.",description:"We require users to enter their password in a text box before they can delete it. This error message appears if the user attempts to delete their password but hasn't entered it into the text box."})});const t=await h.FY6(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.requestStore.refresh(),this.removePasswordSuccess();else{const e=(0,B.wf)(this.props.intl,t);u.Z.setState({...u.Z.state,alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})})}})),i()(this,"defaultErrorMessage",this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."}))}willMount(e){super.willMount(e);const{currentUserStore:t}=m.Z.state;if(t){const e=t.getValue();e&&this.stores.emailStore.set(e.email)}}renderComponent(){const e=this.stores.emailStore.get();if(!e)return;const{requestStore:t}=this.props;return o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(T.Z,{smallMarginBottom:!0},void 0,o()(l._H,{id:"passwordSettings.title",defaultMessage:"Password"})),o()(d.Z,{request:{},requestStore:t,performRequest:async()=>{const t=await h.JRL(this.environment,{email:e,allowAdminBypass:!0});if("success"===t.type){const{samlRedirect:e,hasPassword:s}=t.data;return{samlEnforced:e&&e.enforced,hasPassword:s}}throw t.error},render:(e,t)=>{if(e)return H.renderLabel(o()(l._H,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}));if(t){const{samlEnforced:e,hasPassword:s}=t;return e?H.renderLabel(o()(l._H,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider.",description:"Message letting users know that their password is managed through a 3rd-party provider, which is why they can't set their password on Notion's password settings page."})):(this.stores.hasPasswordStore.set(Boolean(s)),this.renderPasswordActions())}}}))}renderPasswordActions(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return o()(a.Fragment,{},void 0,H.renderLabel(o()(l._H,{id:"passwordSettings.passwordSetInstructions",defaultMessage:"You can set a permanent password if you don't want to use temporary login codes."})),e&&H.renderLabel(this.renderEducationPlanInfo()),o()("div",{style:{display:"flex",alignItems:"center"}},void 0,o()(v.Z,{isLarge:!0,onClick:this.handleChangePasswordClick,style:{marginTop:12,marginBottom:4}},void 0,o()(l._H,t?{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}:{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})),this.canRemovePassword()&&o()(P.Z,{onClick:this.handleShowRemovePasswordModalClick,style:{marginLeft:5,marginTop:12,marginBottom:4}},void 0,o()(l._H,{id:"passwordSettings.removePasswordButton.label",defaultMessage:"Remove password"}))),this.renderPasswordModal())}static renderLabel(e){return o()(M.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,e)}renderPasswordModal(){const{device:e}=this.environment,{open:t}=u.Z.state;return o()(S.Z,{open:t,onDismiss:this.handleCancelChangePassword,innerStyle:{width:e.isPhone?"90%":460,minHeight:270,padding:24},className:f.BK,preventHideChildrenWhileOpening:!0,render:()=>o()(Z.Z,{capture:!0,allowEsc:!0,render:()=>o()(a.Fragment,{},void 0,this.renderSaveNewPassword(),this.renderRemovePassword())})})}renderSaveNewPassword(){const{isEducationPlan:e}=this.props;if(!u.Z.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:r,alert:n}=u.Z.state,i=this.stores.hasPasswordStore.get(),d=this.stores.emailStore.get();return o()(a.Fragment,{},void 0,o()(_.Z,{style:{display:"none"},type:"text",value:d,autoComplete:"username",disabled:!0}),i&&o()(a.Fragment,{},void 0,o()(y.Z,{},void 0,o()(l._H,{id:"passwordSettings.changePasswordModal.oldPasswordInput.label",defaultMessage:"Old Password"})),o()(_.Z,{type:"password",value:r,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.oldPasswordInput.placeholder",defaultMessage:"Enter old password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"})),i?o()(y.Z,{hasMarginTop:!0},void 0,o()(l._H,{id:"passwordSettings.newPasswordInput.label",defaultMessage:"New password"})):o()(y.Z,{},void 0,o()(l._H,{id:"passwordSettings.passwordInput.label",defaultMessage:"Password"})),o()(_.Z,{type:"password",value:t,onChange:this.handlePasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.newPasswordInput.placeholder",defaultMessage:"Enter new password..."}),style:{padding:"4px 8px"},focusInitial:!i,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),o()(y.Z,{hasMarginTop:!0},void 0,o()(l._H,{id:"passwordSettings.repeatPasswordInput.label",defaultMessage:"Repeat password"})),o()(_.Z,{type:"password",value:s,onChange:this.handleRepeatPasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.repeatPasswordInput.placeholder",defaultMessage:"Repeat new password..."}),style:{padding:"4px 8px"},onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),o()(M.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},void 0,o()(l._H,{id:"passwordSettings.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."})),e&&o()(M.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},void 0,this.renderEducationPlanInfo()),this.renderAlert(n),o()(b.Z,{isLarge:!0,style:{marginTop:14},onClick:this.handleSubmit},void 0,o()(l._H,i?{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}:{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})))}renderRemovePassword(){const{isEducationPlan:e}=this.props;if(!u.Z.isRemovePasswordModal())return;const{oldPassword:t,alert:s}=u.Z.state;return o()(a.Fragment,{},void 0,o()("div",{style:{fontSize:14,width:"100%"}},void 0,o()(l._H,{id:"passwordSettings.removePasswordModal.text",defaultMessage:"You're about to remove your password. We'll email you temporary login codes to access Notion going forward.",description:"Message warning the user that they're about to delete their password, and telling them how to log in after their password has been deleted."}),e&&o()(l._H,{id:"passwordSettings.removePasswordModal.educationPlanWarning",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion.",description:"Warning for users on the Education Plan that if they lose access to their school email, they won't be able to log into Notion without a password."})),o()(y.Z,{hasMarginTop:!0},void 0,o()(l._H,{id:"passwordSettings.deletePasswordModal.passwordInput.label",defaultMessage:"Password"})),o()(_.Z,{type:"password",value:t,onChange:this.handleOldPasswordChange,onSubmit:this.handleRemovePasswordClick,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.passwordInput.placeholder",defaultMessage:"Enter your password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"}),this.renderAlert(s),o()(b.Z,{isLarge:!0,style:{marginTop:14},onClick:this.handleRemovePasswordClick},void 0,o()(l._H,{id:"passwordSettings.removePasswordModal.removePasswordButton.label",defaultMessage:"Remove password"})))}renderAlert(e){if(e)return o()(M.Z,{isMultiline:!0,style:{marginTop:8,color:w.ZP.red}},void 0,e)}renderEducationPlanInfo(){return o()(l._H,{id:"passwordSettings.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}saveNewPasswordSuccess(){const{intl:e,isEducationPlan:t}=this.props,{onSubmit:s}=u.Z.state;u.Z.reset();const r=t?e.formatMessage({id:"passwordSettings.setPasswordSuccess.educationMessage",defaultMessage:"Your password is all set! You'll be able to log in, even if you lose access to your school email address."}):e.formatMessage({id:"passwordSettings.setPasswordSuccess.message",defaultMessage:"Your password is all set!"});g.PV({message:r,onAccept:s})}changePasswordSuccess(){const{onSubmit:e}=u.Z.state;u.Z.reset(),g.PV({message:this.props.intl.formatMessage({id:"passwordSettings.changePasswordSuccess.message",defaultMessage:"Your new password has been saved."}),onAccept:e})}removePasswordSuccess(){u.Z.reset(),g.PV({message:this.props.intl.formatMessage({id:"passwordSettings.removePasswordSuccess.message",defaultMessage:"Your password has been removed."})})}getPasswordErrorMessage(e){const t=B.Ql[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return!e&&t}}const G=(0,l.XN)(H);L.performance&&L.performance.mark&&L.performance.mark("src_client_components_PasswordSettings_tsx_end"),L.performance&&L.performance.measure&&L.performance.measure("src_client_components_PasswordSettings_tsx","src_client_components_PasswordSettings_tsx_start","src_client_components_PasswordSettings_tsx_end")},4885:(e,t,s)=>{s.d(t,{Z:()=>b});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(54651),l=s.n(a),d=s(1769),p=s(54007),c=s(22765),m=s(75939),u=s(15077),h=s(88226),g=s(32823),f=s(68268),S=s(85340),_=s(78637),v="object"==typeof s.g?s.g:window;v.performance&&v.performance.mark&&v.performance.mark("src_client_components_SearchSortMenu_tsx_start");const b=function(e){const t=l().useRef(),s=(0,S.Fy)(),{isMobile:r}=s,{activeOption:n,items:a}=l().useMemo((()=>function(e){const{currentSortBy:t,setSortBy:s,sortOptions:r,selectButton:n}=e;let i=r[0];const a=r.map((e=>{const r=e.key===t;return r&&(i=e),{key:e.key,action:()=>{s(e.key),n&&n.current&&n.current.closeMenu()},render:t=>l().createElement(p.Z,o()({},t,{title:e.formattedName,right:r&&m.Z.check({fill:c.ZP.blue,width:12,height:12})}))}}));return{activeOption:i,items:a}}({...e,selectButton:t})),[e,t]),v=(0,_.y)((e=>({selectedTitle:{color:e.mediumTextColor},label:{marginRight:2,fontSize:r?g.Z.fontSize.UISmall.mobile:g.Z.fontSize.UISmall.desktop,transform:"translateY(0.5px)"},innerButton:{color:e.mediumTextColor,fontWeight:g.Z.fontWeight.medium,fontSize:r?g.Z.fontSize.UISmall.mobile:g.Z.fontSize.UISmall.desktop,height:20,padding:"2px 4px",marginRight:1,transform:"translateY(0.5px)"},menu:{minWidth:200}})),[r]),b=r?i()(f._H,{id:"search.sort.sortMenuTitle",defaultMessage:"Sort By"}):void 0;return l().createElement(h.Z,{ref:e=>{e&&(t.current=e)},alignmentToOrigin:d.v2.Start,selectedTitle:i()("div",{style:v.selectedTitle},void 0,n.formattedName),label:i()(f._H,{id:"search.sort.sortButtonPrefixLabel",defaultMessage:"Sort:",description:"Will be displayed next to a sortOrder"}),renderMenuSections:()=>[{key:"searchSortOrder",render:e=>l().createElement(u.Z,o()({},e,{title:b,desktopStyle:v.menu,disableDesktopPadding:!1})),items:a}],labelStyle:v.label,innerButtonStyle:v.innerButton})};v.performance&&v.performance.mark&&v.performance.mark("src_client_components_SearchSortMenu_tsx_end"),v.performance&&v.performance.measure&&v.performance.measure("src_client_components_SearchSortMenu_tsx","src_client_components_SearchSortMenu_tsx_start","src_client_components_SearchSortMenu_tsx_end")},88226:(e,t,s)=>{s.d(t,{Z:()=>Z});var r=s(52264),o=s.n(r),n=s(12662),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(30873),m=s(24708),u=s(99214),h=s(7554),g="object"==typeof s.g?s.g:window;g.performance&&g.performance.mark&&g.performance.mark("src_client_stores_SelectButtonStore_ts_start");class f extends h.Z{getInitialState(){return{}}}const S=f;g.performance&&g.performance.mark&&g.performance.mark("src_client_stores_SelectButtonStore_ts_end"),g.performance&&g.performance.measure&&g.performance.measure("src_client_stores_SelectButtonStore_ts","src_client_stores_SelectButtonStore_ts_start","src_client_stores_SelectButtonStore_ts_end");var _=s(73947),v=s(53150),b=s(77365),y=s(75939),w=s(79863),M="object"==typeof s.g?s.g:window;M.performance&&M.performance.mark&&M.performance.mark("src_client_components_SelectButton_tsx_start");class P extends c.Z{constructor(...e){super(...e),l()(this,"storeTypes",{buttonPopupStore:v.Z,SelectButtonStore:S}),l()(this,"renderMenuItemOrigin",(e=>{const{style:t}=this.props;if(this.props.isMenuItem){const s=this.props.label?{title:this.props.label,right:this.props.selectedTitle}:{title:this.props.selectedTitle};return p().createElement(w.Z,i()({},e,{focused:!!this.props.focused,disabled:this.props.disabled,style:t},s))}})),l()(this,"renderButtonOrigin",(e=>{const{innerButtonStyle:t}=this.props;return p().createElement(b.Z,i()({disabled:this.props.disabled,disabledFeedback:!0,style:{marginRight:-6,...t}},e),this.props.selectedTitle,this.chevronDownIcon())})),l()(this,"handleSelection",(e=>{this.stores.SelectButtonStore.setState({selectedKey:e})})),l()(this,"closeMenu",(()=>{const{buttonPopupStore:e}=this.stores;e.setState({...e.state,open:!1})})),l()(this,"chevronDownIcon",(()=>{const{device:e}=this.environment;return y.Z.chevronDown({width:e.isMobile?14:10,marginLeft:4,fill:this.theme.lightIconColor})}))}renderComponent(){const{isMenuItem:e,style:t,labelStyle:s}=this.props;return e?this.renderButtonPopup(this.renderMenuItemOrigin):o()("div",{style:{display:"flex",alignItems:"center",height:32,...t}},void 0,this.props.label&&o()("div",{style:{marginRight:"auto",color:this.theme.lightTextColor,fontSize:14,...s}},void 0,this.props.label),this.renderButtonPopup(this.renderButtonOrigin))}renderButtonPopup(e){const{device:t}=this.environment,{alignmentToOrigin:s}=this.props;return o()(u.Z,{popupType:t.isMobile?u.Z.PopupType.SlideUp:u.Z.PopupType.Popup,buttonPopupStore:this.stores.buttonPopupStore,alignmentToOrigin:void 0!==s?s:u.Z.Alignment.End,renderOrigin:e,placementToOrigin:this.props.isMenuItem?u.Z.Placement.Right:u.Z.Placement.Bottom,render:e=>{let s;s=t.isMobile?{menuType:_.ZP.MenuType.ActionSheet}:{menuType:_.ZP.MenuType.Popup};const{focusedIndex:r,menuSections:n}=this.getMenuSections(e);return p().createElement(_.ZP,s,o()(m.Z,{type:m.Z.Type.Vertical,initialFocus:r,sections:n}))}})}getMenuSections(e){let t,s=0;return{menuSections:this.props.renderMenuSections(e).map((e=>({...e,items:e.items.map((e=>(e.key===this.stores.SelectButtonStore.state.selectedKey&&(t=s),s++,{...e,action:t=>{e.action(t),this.handleSelection(e.key)}})))}))),focusedIndex:t}}}const Z=P;M.performance&&M.performance.mark&&M.performance.mark("src_client_components_SelectButton_tsx_end"),M.performance&&M.performance.measure&&M.performance.measure("src_client_components_SelectButton_tsx","src_client_components_SelectButton_tsx_start","src_client_components_SelectButton_tsx_end")},68963:(e,t,s)=>{s.d(t,{Z:()=>y});var r=s(52264),o=s.n(r),n=s(12662),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(53087),m=s(30873),u=s(81407),h=s(24475),g=s(39748),f=s(93132),S=s(22765),_=s(60191),v="object"==typeof s.g?s.g:window;v.performance&&v.performance.mark&&v.performance.mark("src_client_components_SelectionAnnotationButton_tsx_start");class b extends m.Z{constructor(...e){super(...e),l()(this,"handleClick",(e=>{c.aS({environment:this.environment,annotation:[this.props.type]}),this.props.onClick&&this.props.onClick(),h.mt_(this.environment,{action:this.props.type})})),l()(this,"isDisabledStore",this.createComputedStore((()=>this.props.disabled||"editing"!==g.Z.state.mode)))}renderComponent(){return o()(u.Z,{renderTooltip:()=>this.props.tooltipLabel,render:e=>p().createElement(f.Z,i()({style:this.getButtonStyle(),disabled:this.isDisabledStore.state,disabledFeedback:this.isDisabledStore.state,onClick:this.handleClick},e),this.props.children)})}getButtonStyle(){return{display:"flex",alignItems:"center",padding:"0 8px",color:(0,_.Ld)(this.props.type)?S.ZP.blue:this.theme.regularTextColor,...this.props.style}}}const y=b;v.performance&&v.performance.mark&&v.performance.mark("src_client_components_SelectionAnnotationButton_tsx_end"),v.performance&&v.performance.measure&&v.performance.measure("src_client_components_SelectionAnnotationButton_tsx","src_client_components_SelectionAnnotationButton_tsx_start","src_client_components_SelectionAnnotationButton_tsx_end")},55313:(e,t,s)=>{s.d(t,{Z:()=>M});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(96768),m=s(93132),u=s(93877),h=s(45147),g=s(60191),f=s(68268),S=s(21651),_=s(30873),v=s(81407),b=s(39748),y="object"==typeof s.g?s.g:window;y.performance&&y.performance.mark&&y.performance.mark("src_client_components_SelectionEquationButton_tsx_start");class w extends _.Z{constructor(...e){super(...e),l()(this,"renderMenuTooltip",(()=>{const e=this.getThemeColors();return i()(p().Fragment,{},void 0,i()("div",{},void 0,i()(f._H,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})),i()("div",{},void 0,i()(S.Z,{style:e.keyboardShortcut,name:"openEquationMenu"})))})),l()(this,"handleButtonPopupClick",(e=>{const{onClick:t}=this.props;u.qn({environment:this.environment,analyticsFrom:"rich_text_menu"}),t&&t(e)})),l()(this,"isSelected",(()=>(0,g.Ld)(c.GK.Equation))),l()(this,"isDisabled",(()=>{const{disabled:e}=this.props;if(e)return!0;if("editing"!==b.Z.state.mode&&!h.Z.isOpen())return!0;const t={[c.GK.User]:c.GK.User,[c.GK.Page]:c.GK.Page,[c.GK.Bot]:c.GK.Bot,[c.GK.Date]:c.GK.Date,[c.GK.ExternalObjectInstance]:c.GK.ExternalObjectInstance,[c.GK.TemporaryPage]:c.GK.TemporaryPage,[c.GK.TemplateVariable]:c.GK.TemplateVariable};for(const s of Object.values(t))if((0,g.J6)(s))return!0;return!1})),l()(this,"styles",{equationButton:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8}})}renderComponent(){const{style:e,children:t}=this.props,s=this.getThemeColors(),r=this.isDisabled();return i()(v.Z,{renderTooltip:this.renderMenuTooltip,render:n=>p().createElement(m.Z,o()({style:{...this.styles.equationButton,...s.equationButton,...e},disabled:r,disabledFeedback:r,onClick:this.handleButtonPopupClick},n),t)})}getThemeColors(){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},keyboardShortcut:{color:this.theme.mediumInvertedTextColor}}}}const M=(0,f.XN)(w);y.performance&&y.performance.mark&&y.performance.mark("src_client_components_SelectionEquationButton_tsx_end"),y.performance&&y.performance.measure&&y.performance.measure("src_client_components_SelectionEquationButton_tsx","src_client_components_SelectionEquationButton_tsx_start","src_client_components_SelectionEquationButton_tsx_end")},22698:(e,t,s)=>{s.d(t,{Z:()=>P});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(54651)),p=s.n(d),c=s(52632),m=s(30873),u=s(81407),h=s(21651),g=s(24475),f=s(93132),S=s(39748),_=s(45748),v=s(60191),b=s(68268),y=s(96768),w="object"==typeof s.g?s.g:window;w.performance&&w.performance.mark&&w.performance.mark("src_client_components_SelectionLinkButton_tsx_start");class M extends m.Z{constructor(...e){super(...e),l()(this,"handleButtonPopupClick",(()=>{c.dz({type:"focusOnly",focus:!0}),g.mt_(this.environment,{action:y.GK.Link})}))}renderComponent(){const e=(0,v.Ld)(y.GK.Link),t=this.isDisabled();return i()(u.Z,{renderTooltip:()=>i()(d.Fragment,{},void 0,i()("div",{},void 0,i()(b._H,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip",description:"Prompt for the user to add a URL to link to from the selected text."})),i()("div",{},void 0,i()(h.Z,{style:{color:this.theme.mediumInvertedTextColor},name:"openLinkMenu"}))),render:s=>p().createElement(f.Z,o()({style:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8,...e&&{color:this.theme.blueColor},whiteSpace:"nowrap",...this.props.style},disabled:t,disabledFeedback:t},s,{onClick:this.handleButtonPopupClick}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==S.Z.state.mode&&!_.Z.state.open||!!((0,v.J6)(y.GK.User)||(0,v.J6)(y.GK.Bot)||(0,v.J6)(y.GK.Date)||(0,v.J6)(y.GK.Page)))}}const P=(0,b.XN)(M);w.performance&&w.performance.mark&&w.performance.mark("src_client_components_SelectionLinkButton_tsx_end"),w.performance&&w.performance.measure&&w.performance.measure("src_client_components_SelectionLinkButton_tsx","src_client_components_SelectionLinkButton_tsx_start","src_client_components_SelectionLinkButton_tsx_end")},51095:(e,t,s)=>{s.d(t,{Z:()=>p});var r=s(52264),o=s.n(r),n=(s(54651),s(21730)),i=s(9665),a=s(30873),l="object"==typeof s.g?s.g:window;l.performance&&l.performance.mark&&l.performance.mark("src_client_components_SettingBox_tsx_start");class d extends a.Z{static renderDivider(){return o()(n.Z,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:s}=this.props,r=()=>e.isMobile?18:60,n=()=>e.isMobile?18:36;return this.props.disableScroller?o()("div",{style:{paddingLeft:r(),paddingRight:r()}},void 0,o()("div",{style:{paddingTop:n(),paddingBottom:n()}},void 0,t),s&&o()("div",{style:{paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},void 0,s)):o()("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.cardContentBackground}},void 0,o()(i.ZP,{type:i.xm.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:r(),paddingRight:r(),paddingTop:n(),paddingBottom:n()}},void 0,t),s&&o()("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:r(),paddingRight:r(),paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},void 0,s))}}const p=d;l.performance&&l.performance.mark&&l.performance.mark("src_client_components_SettingBox_tsx_end"),l.performance&&l.performance.measure&&l.performance.measure("src_client_components_SettingBox_tsx","src_client_components_SettingBox_tsx_start","src_client_components_SettingBox_tsx_end")},30114:(e,t,s)=>{s.d(t,{Z:()=>c});var r=s(52264),o=s.n(r),n=s(43629),i=s.n(n),a=(s(54651),s(30873)),l=s(75939),d="object"==typeof s.g?s.g:window;d.performance&&d.performance.mark&&d.performance.mark("src_client_components_SidebarItem_tsx_start");class p extends a.Z{renderComponent(){return o()("div",{style:this.getStyle(),onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,className:this.props.className},void 0,this.props.left&&o()("div",{style:this.getLeftStyle()},void 0,this.props.left),this.props.icon&&o()("div",{style:this.getIconStyle()},void 0,this.props.icon,this.renderAliasIcon()),this.renderChildren(),this.props.right&&o()("div",{style:this.getRightStyle()},void 0,this.props.right))}renderAliasIcon(){if(this.props.isAlias)return o()("div",{},void 0,l.Z.pageLinkIndicator({position:"absolute",width:"50%",height:"50%",right:0,bottom:0}))}renderChildren(){return o()("div",{style:{...p.childrenStyle,overflow:"hidden",textOverflow:this.props.right&&!this.props.isMobile?"clip":"ellipsis",...this.props.childrenStyle}},void 0,this.props.children)}getStyle(){const{WindowSizeStore:e}=this.environment,t={...this.props.isMobile?p.wrapMobileStyle:p.wrapStyle};if(this.props.isMobile){this.props.disableMobileBorder||(t.boxShadow="0 1px 0 ".concat(this.theme.regularDividerColor)),t.marginBottom=this.props.shouldShowMobileMarginBottom?12:1;const s=this.props.style&&"number"==typeof this.props.style.paddingLeft?this.props.style.paddingLeft:"number"==typeof t.paddingLeft?t.paddingLeft:0;t.paddingLeft=e.getSafePaddingLeftCSS(s)}else this.props.style&&this.props.style.paddingLeft&&(t.paddingLeft=this.props.style&&this.props.style.paddingLeft);return{...t,paddingLeft:t.paddingLeft,...this.props.style}}getLeftStyle(){return{flexShrink:0,flexGrow:0,borderRadius:3,color:this.theme.mediumTextColor,width:this.props.isMobile?26:22,height:this.props.isMobile?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:this.props.icon?0:8}}getIconStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:this.props.isMobile?28:22,height:this.props.isMobile?24:18,marginRight:4,position:"relative"}}getRightStyle(){return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%"}}}i()(p,"wrapStyle",{display:"flex",alignItems:"center",minHeight:27,fontSize:14,paddingTop:2,paddingBottom:2,paddingLeft:14,paddingRight:14,width:"100%"}),i()(p,"wrapMobileStyle",{display:"flex",alignItems:"center",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,width:"100%",userSelect:"none",WebkitUserSelect:"none"}),i()(p,"childrenStyle",{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0});const c=p;d.performance&&d.performance.mark&&d.performance.mark("src_client_components_SidebarItem_tsx_end"),d.performance&&d.performance.measure&&d.performance.measure("src_client_components_SidebarItem_tsx","src_client_components_SidebarItem_tsx_start","src_client_components_SidebarItem_tsx_end")},8783:(e,t,s)=>{s.d(t,{Z:()=>dt});var r=s(12662),o=s.n(r),n=s(52264),i=s.n(n),a=s(43629),l=s.n(a),d=(s(62537),s(56225)),p=s.n(d),c=s(54651),m=s.n(c),u=s(50122),h=s(36150),g=s(54966),f=s(4379),S=s(97818),_=s(48140),v=s(7554),b="object"==typeof s.g?s.g:window;let y;b.performance&&b.performance.mark&&b.performance.mark("src_client_stores_SpacePermissionsSettingsStore_ts_start"),function(e){e[e.Members=0]="Members",e[e.Groups=1]="Groups",e[e.Guests=2]="Guests"}(y||(y={}));class w extends v.Z{getInitialState(){return{currentTab:y.Members,limitMembers:!0,limitGuests:!0,membersFilter:"",guestsFilter:"",groupsFilter:"",groupNameInputValue:"",upsellModalOpen:!1,sorts:{members:void 0,guests:void 0}}}}const M=w;b.performance&&b.performance.mark&&b.performance.mark("src_client_stores_SpacePermissionsSettingsStore_ts_end"),b.performance&&b.performance.measure&&b.performance.measure("src_client_stores_SpacePermissionsSettingsStore_ts","src_client_stores_SpacePermissionsSettingsStore_ts_start","src_client_stores_SpacePermissionsSettingsStore_ts_end");var P=s(52895),Z=s(30873),k=s(21730),C=s(93022),x=s(67909),T=s(53150),B=s(99214),I=s(24708),L=s(73947),H=s(74758),G=s(11678),R=s(4577),E=s(36183),A=s(54399),U=s(97043),D=s(48108),N=s(37757),O=s(81407),F=s(49667),V=s(24475),j=s(79088),z=s(5489),W=s(77365),K=s(75939),q=s(93655),Y=s(55530),X=s(68268),J=s(1921),Q="object"==typeof s.g?s.g:window;Q.performance&&Q.performance.mark&&Q.performance.mark("src_client_components_GuestPagesPopup_tsx_start");const $=(0,X.vU)({removingGuest:{id:"guestPagesPopup.removeGuest.updatingMessage",defaultMessage:"Updating…"},addingMember:{id:"guestPagesPopup.addMemberPermission.updatingMessage",defaultMessage:"Updating…"}});class ee extends Z.Z{constructor(...e){super(...e),l()(this,"storeTypes",{buttonPopupStore:T.Z}),l()(this,"renderPopup",(()=>{const{device:e}=this.environment,{store:t,guest:s}=this.props,r=t.canAdmin(),n=s.guestPageIds.map((e=>{const s=x.Z.createChildStore(t,{table:J.iU,id:e});return{key:e,render:e=>m().createElement(H.Z,o()({},e,{store:s,placeholder:i()(X._H,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const s=x.Z.createChildStore(t,{table:J.iU,id:e}),r=(0,D.Z)({store:s,fullyQualified:!1});C.c4({environment:this.environment,url:r,metaClick:!0})}}}));let a,l;return a=e.isMobile?{menuType:L.ZP.MenuType.ActionSheet}:{menuType:L.ZP.MenuType.Popup,width:300},(0,q.qF)(this.environment)&&(l=i()(O.Z,{renderTooltip:()=>this.isSubscribed()?i()(X._H,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):i()(X._H,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>m().createElement(z.Z,o()({isLarge:!0,onClick:this.handleConvertToMemberClick},e),this.isSubscribed()?i()(X._H,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):i()(X._H,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}))})),m().createElement(L.ZP,a,r&&i()(F.Z,{title:i()("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"}},void 0,l,i()(O.Z,{renderTooltip:()=>i()(X._H,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>m().createElement(z.Z,o()({isLarge:!0,isRed:!0,style:{marginLeft:l?8:0},onClick:this.handleRemoveClick},e),i()(X._H,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"}))}))}),r&&i()(R.Z,{title:i()(X._H,{id:"guestPagesPopup.guestAccessiblePagesCaption",defaultMessage:"This guest can access these pages"})}),i()(I.Z,{type:I.Z.Type.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>m().createElement(G.Z,e),items:n}]}))})),l()(this,"handleRemoveClick",(()=>{E.vC({showCancel:!0,keepFocus:!1,message:i()(X._H,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:i()(X._H,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{guest:e,store:t}=this.props;this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),j.j({message:$.removingGuest});"success"===(await A.XgZ(this.environment,{userIds:[e.userId],spaceId:t.id,removePagePermissions:!0,revokeUserTokens:!1})).type&&(await U.bi(this.environment),V.bwR(this.environment)),j.x()}}]})})),l()(this,"handleConvertToMemberClick",(async()=>{const e=N.Ue(this.environment),{store:t,guest:s,isSubscribed:r}=this.props,o=f.ep({environment:this.environment,store:t,permissionItems:[{type:"user_permission",role:r?"read_and_write":"editor",user_id:s.userId}],transaction:e});N.th({environment:this.environment,transaction:e}),this.stores.buttonPopupStore.setState({...this.stores.buttonPopupStore.state,open:!1}),j.j({message:$.addingMember});try{await o,await U.bi(this.environment),V.Rbv(this.environment,{member_user_id:s.userId})}finally{j.x()}}))}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:r}=this.props;return r.guestPageIds.map((e=>{x.Z.createChildStore(s,{table:J.iU,id:e}).getValue()})),0===r.guestPageIds.length?i()(X._H,{id:"guestPagesPopup.permissionsForUserGuest.label",defaultMessage:"Guest"}):i()(B.Z,{popupType:e.isMobile?B.Z.PopupType.SlideUp:B.Z.PopupType.Popup,renderOrigin:e=>m().createElement(W.Z,e,i()(X._H,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:r.guestPageIds.length}}),K.Z.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=Y.Z.state;return Boolean(e&&(0,q.YK)(e))}}const te=(0,X.XN)(ee);Q.performance&&Q.performance.mark&&Q.performance.mark("src_client_components_GuestPagesPopup_tsx_end"),Q.performance&&Q.performance.measure&&Q.performance.measure("src_client_components_GuestPagesPopup_tsx","src_client_components_GuestPagesPopup_tsx_start","src_client_components_GuestPagesPopup_tsx_end");var se=s(74621),re=s(82706),oe=s(51095),ne=s(68646),ie=s(22982),ae=s(67587),le=s(84851),de=s(49720),pe="object"==typeof s.g?s.g:window;pe.performance&&pe.performance.mark&&pe.performance.mark("src_client_stores_SpacePermissionGroupStore_ts_start");class ce extends v.Z{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}const me=ce;pe.performance&&pe.performance.mark&&pe.performance.mark("src_client_stores_SpacePermissionGroupStore_ts_end"),pe.performance&&pe.performance.measure&&pe.performance.measure("src_client_stores_SpacePermissionGroupStore_ts","src_client_stores_SpacePermissionGroupStore_ts_start","src_client_stores_SpacePermissionGroupStore_ts_end");var ue=s(13578),he=s(37060),ge=s(38983),fe=s(86165),Se=s(99302),_e=s(30855),ve=s(22416),be=s(80227),ye=s(2103),we=s(11567),Me=s(73012),Pe=s(19946),Ze=s(3134),ke=s(28157),Ce=s(32823),xe=s(41812),Te=s(6191),Be=s(95683),Ie=s(16170),Le=s(42806),He=s(63132),Ge=s(98041),Re=s(42108),Ee=s(11781),Ae=s(84868),Ue=s(22765),De="object"==typeof s.g?s.g:window;De.performance&&De.performance.mark&&De.performance.mark("src_client_components_SpacePermissionGroup_tsx_start");class Ne extends Z.Z{constructor(...e){super(...e),l()(this,"storeTypes",{spacePermissionGroupStore:me,actionMenuButtonPopupStore:T.Z,addMemberButtonPopupStore:T.Z,autocompleteStore:ge.Z,mouseStore:ye.Z}),l()(this,"renderUser",(e=>{const{store:t,group:s,disabled:r}=this.props,o=!!t.state.value&&(0,Ee.wv)(t.state.value,e.id);return i()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},e.id,i()("div",{style:{display:"flex"}},void 0,i()(le.Z,{userValue:e,style:{paddingRight:6,minHeight:34,lineHeight:1.2,width:"100%"},avatarSize:24}),o&&i()(Ae.Z,{},void 0,i()(X._H,{id:"spacePermissionsSettings.user.admin",defaultMessage:"Admin"}))),!r&&i()(W.Z,{isGray:!0,hoveredStyle:{color:Ue.ZP.red},onClick:async()=>{if(await E.gt({message:i()(X._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:i()(X._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const r=(s.user_ids||[]).filter((t=>t!==e.id)),o={...s,user_ids:r};N.H5(this.environment,(e=>{S.jF({spaceStore:t,group:o,transaction:e})})),V.xtf(this.environment)}}},void 0,i()(X._H,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})))})),l()(this,"renderActionMenu",(()=>{const e={key:"action_menu",render:e=>m().createElement(G.Z,e),items:[{key:"rename",render:e=>m().createElement(he.Z,o()({},e,{title:i()(X._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})})),action:this.handleRename},{key:"delete",render:e=>m().createElement(he.Z,o()({},e,{title:i()(X._H,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})),action:this.handleDelete}]};return i()(L.ZP,{menuType:L.ZP.MenuType.Popup},void 0,i()(I.Z,{type:I.Z.Type.Vertical,initialFocus:0,sections:[e],onAccept:()=>{this.stores.actionMenuButtonPopupStore.reset()}}))})),l()(this,"renderAddMemberMenu",(()=>{const{store:e}=this.props,{userInputValue:t,temporaryUserIds:s}=this.stores.spacePermissionGroupStore.state,r={request:{query:t,temporaryUserIds:this.stores.spacePermissionGroupStore.state.temporaryUserIds},performRequest:async({query:e,temporaryUserIds:t})=>{const{group:s}=this.props,r=s.user_ids||[];return(await Se.O$({environment:this.environment,query:e,membersOnly:!0})).filter((e=>r.indexOf(e.id)<0&&t.indexOf(e.id)<0)).slice(0,20)},render:this.renderAddMemberResults},o=s.map((t=>{const r=e.getRecordValue({table:g.KJ,id:t});return i()(Ge.vw,{userValue:r,format:Ge.vw.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const e=s.filter((e=>e!==t));this.stores.spacePermissionGroupStore.setState({...this.stores.spacePermissionGroupStore.state,temporaryUserIds:e})},shouldShrink:!0,isSingle:!1},t)}));return i()(L.ZP,{menuType:L.ZP.MenuType.Popup,tokenInputHeader:!0,header:i()(ve.Z,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:ve.Z.Format.Group,tokens:o,placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:this.handleTokenInputMenuItemRemoveLastToken,value:t,onChange:this.handleTokenInputMenuItemChange,right:i()(Be.Z,{isLarge:!0,onClick:this.handleAddDoneClick},void 0,i()(X._H,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"}))})},void 0,m().createElement(fe.Z,r))})),l()(this,"renderAddMemberResults",((e,t)=>{const{store:s}=this.props,r=t||[],{temporaryUserIds:n}=this.stores.spacePermissionGroupStore.state,a=r.map((({id:e})=>e));if(0===a.length)return i()(G.Z,{},void 0,i()(R.Z,{title:i()(X._H,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})}));{const e={key:"user_menu",render:e=>m().createElement(G.Z,e),items:a.map((e=>{const t=P.Z.createChildStore(s,{table:g.KJ,id:e}).getValue();return{key:e,render:e=>m().createElement(_e.Z,o()({},e,{user:t})),action:()=>{const t=[...n,e];this.stores.spacePermissionGroupStore.setState({...this.stores.spacePermissionGroupStore.state,temporaryUserIds:t,userInputValue:""})}}}))};return i()(I.Z,{type:I.Z.Type.Vertical,initialFocus:0,sections:[e]})}})),l()(this,"handleMouseEnter",(e=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0})})),l()(this,"handleMouseLeave",(e=>{this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1})})),l()(this,"handleMouseDown",(e=>{(0,Pe.sh)(e.target,(e=>e&&e.classList&&e.classList.contains(Ne.dragHandleClass)))||(0,Me.$0)(e)})),l()(this,"handleIconChange",(e=>{const{store:t,group:s}=this.props,r={...s,icon:e};N.H5(this.environment,(e=>{S.jF({spaceStore:t,group:r,transaction:e})})),V.zUE(this.environment,{is_emoji:(0,xe.Z)(e)})})),l()(this,"handleRename",(()=>{const{group:e,spacePermissionsSettingsStore:t}=this.props;t.setState({...t.state,editingNameGroupId:e.id,groupNameInputValue:e.name||""}),this.stores.actionMenuButtonPopupStore.setState({...this.stores.actionMenuButtonPopupStore.state,open:!1}),V.XbW(this.environment)})),l()(this,"handleDelete",(async()=>{const{store:e,group:t}=this.props;this.stores.actionMenuButtonPopupStore.setState({...this.stores.actionMenuButtonPopupStore.state,open:!1});if(await E.gt({message:i()(X._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:i()(X._H,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})){const s=N.Ue(this.environment);await S.Xv({environment:this.environment,spaceStore:e,group:t,transaction:s}),N.th({environment:this.environment,transaction:s}),V.dan(this.environment)}})),l()(this,"handleNameChange",(e=>{this.props.spacePermissionsSettingsStore.setState({...this.props.spacePermissionsSettingsStore.state,groupNameInputValue:e})})),l()(this,"handleNameCancel",(()=>{const{spacePermissionsSettingsStore:e}=this.props;e.setState({...e.state,editingNameGroupId:void 0,groupNameInputValue:""})})),l()(this,"handleNameAccept",(()=>{const{store:e,group:t,spacePermissionsSettingsStore:s}=this.props,{editingNameGroupId:r,groupNameInputValue:o}=s.state;if(r===t.id){if(o!==t.name){const s={...t,name:o};N.H5(this.environment,(t=>{S.jF({spaceStore:e,group:s,transaction:t})}))}s.setState({...s.state,editingNameGroupId:void 0,groupNameInputValue:""})}})),l()(this,"handleTokenInputMenuItemRemoveLastToken",(()=>{const{temporaryUserIds:e}=this.stores.spacePermissionGroupStore.state,t=e.slice(0,e.length-1);this.stores.spacePermissionGroupStore.setState({...this.stores.spacePermissionGroupStore.state,temporaryUserIds:t})})),l()(this,"handleTokenInputMenuItemChange",(e=>{const t=e.target.value,{spacePermissionGroupStore:s}=this.stores,{extractedEmails:r,newInputValue:o}=(0,Le.zI)(t),{currentSpaceStore:n}=He.Z.state,{data:i}=Y.Z.state;if(!i||!n)return;const a=(0,q.uF)(i).map((e=>e.userId)),l=p().compact(a.map((e=>P.Z.createChildStore(n,{table:g.KJ,id:e}).getValue()))).filter((e=>r.includes(e.email)&&!s.state.temporaryUserIds.includes(e.id)));s.setState({...s.state,temporaryUserIds:[...s.state.temporaryUserIds,...l.map((e=>e.id))],userInputValue:o})})),l()(this,"handleAddDoneClick",(()=>{const{store:e,group:t}=this.props,{temporaryUserIds:s}=this.stores.spacePermissionGroupStore.state,r=t.user_ids||[],o=p().union(r,s),n={...t,user_ids:o};N.H5(this.environment,(t=>{S.jF({spaceStore:e,group:n,transaction:t})})),this.stores.spacePermissionGroupStore.reset(),this.stores.addMemberButtonPopupStore.setState({...this.stores.addMemberButtonPopupStore.state,open:!1}),V.Kf$(this.environment,{add_member_count:s.length})})),l()(this,"handleAddMemberButtonPopupClose",(()=>{this.stores.spacePermissionGroupStore.reset()})),l()(this,"handleShowMoreClick",(()=>{this.stores.spacePermissionGroupStore.setState({...this.stores.spacePermissionGroupStore.state,limitUsers:!1})}))}renderComponent(){const{store:e,group:t,spacePermissionsSettingsStore:s,disabled:r}=this.props,{groupsFilter:n}=s.state,{limitUsers:a}=this.stores.spacePermissionGroupStore.state,l=Re.k({intl:this.props.intl,group:t}),{countRemainingUsers:d,totalNumberMembers:c,limitedUserValues:u}=Re.r({group:t,spaceStore:e,limit:a&&!n?Ne.defaultLimit:void 0}),h=p().sortBy(u,(e=>(0,g.of)(e))),f=(n?(0,_.ZP)(n,h,(e=>(0,g.of)(e))):h).sort(((t,s)=>{if(!e.state.value)return 0;const r=e.state.value;return Number((0,Ee.wv)(r,s.id))-Number((0,Ee.wv)(r,t.id))})),{mouseEntered:S}=this.stores.mouseStore.state,v=S&&!Te.Z.state.isKeyboardMode&&!r,{editingNameGroupId:b,groupNameInputValue:y}=s.state;return i()("div",{style:{marginBottom:36,fontSize:14,width:"100%"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown},void 0,i()("div",{style:{display:"flex"}},void 0,!r&&i()(be.Z,{isVisible:!0,animationStyle:{opacity:v?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>i()("div",{style:{marginLeft:-24,marginRight:4},className:Ne.dragHandleClass},void 0,i()(we.Z,{hideClickMessage:!0}))}),i()(de.Z,r?{disabled:!0,icon:t.icon?{pointer:e.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:l,style:{marginLeft:3,marginRight:3}}:{disabled:!1,bucket:"public",icon:t.icon?{pointer:e.pointer,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:l,onChange:this.handleIconChange,style:{marginLeft:3,marginRight:3}}),b===t.id?i()(Ze.Z,{capture:!0,onEsc:this.handleNameCancel},void 0,i()(ke.Z,{disabled:r,type:ke.Z.Type.Inline,style:{marginLeft:4,cursor:"text",fontWeight:Ce.Z.fontWeight.semibold},placeholderStyle:{marginLeft:4,cursor:"text",color:this.theme.lightTextColor,fontWeight:Ce.Z.fontWeight.semibold},placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:y,onChange:this.handleNameChange,onBlur:this.handleNameAccept,onSubmit:this.handleNameAccept})):i()(W.Z,{isSmall:!0,style:{fontWeight:Ce.Z.fontWeight.semibold,marginLeft:-2,marginTop:-1},onClick:this.handleRename,disabled:r,className:"notranslate"},void 0,l),c>0&&i()("div",{style:{alignItems:"center",marginLeft:8,color:this.theme.mediumTextColor},className:"notranslate"},void 0,i()(X._H,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:c}})),i()("div",{style:{flexGrow:1}}),!r&&i()(B.Z,{popupType:ue.kQ.Popup,render:this.renderActionMenu,buttonPopupStore:this.stores.actionMenuButtonPopupStore,renderOrigin:e=>m().createElement(Ie.Z,o()({icon:K.Z.dots},e))})),i()(k.Z,{size:12}),f.map(this.renderUser),d>0&&i()("div",{},void 0,i()(W.Z,{isGray:!0,style:{marginTop:4},onClick:this.handleShowMoreClick},void 0,i()(X._H,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:d}}))),!r&&i()(B.Z,{popupType:ue.kQ.Popup,render:this.renderAddMemberMenu,buttonPopupStore:this.stores.addMemberButtonPopupStore,onClose:this.handleAddMemberButtonPopupClose,style:{width:400},renderOrigin:e=>i()("div",{},void 0,m().createElement(W.Z,o()({isGray:!0,icon:K.Z.plus,style:{marginTop:4}},e),i()(X._H,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})))}))}}l()(Ne,"dragHandleClass","drag_handle"),l()(Ne,"defaultLimit",10);const Oe=(0,X.XN)(Ne);De.performance&&De.performance.mark&&De.performance.mark("src_client_components_SpacePermissionGroup_tsx_end"),De.performance&&De.performance.measure&&De.performance.measure("src_client_components_SpacePermissionGroup_tsx","src_client_components_SpacePermissionGroup_tsx_start","src_client_components_SpacePermissionGroup_tsx_end");var Fe=s(64723),Ve=s(64152),je=s(90924),ze=s(80287),We=s(86272),Ke=s(12693),qe=s(68195),Ye=s(33101),Xe=s(49468),Je=s(92051),Qe=s(14611),$e=s(61149),et=s(13148),tt=s(23272),st=s(52149),rt=s(38361),ot=s(83982),nt=s(93132),it=s(17421),at="object"==typeof s.g?s.g:window;at.performance&&at.performance.mark&&at.performance.mark("src_client_components_SpacePermissionsSettings_tsx_start");class lt extends Z.Z{constructor(...e){super(...e),l()(this,"storeTypes",{spacePermissionsSettingsStore:M}),l()(this,"renderSpaceGroup",(e=>{const{store:t}=this.props,{spacePermissionsSettingsStore:s}=this.stores;return i()(Oe,{store:t,group:e,spacePermissionsSettingsStore:s,disabled:!this.canEditGroups()},e.id)})),l()(this,"handleUpdateClick",(()=>{const e=(0,X.vU)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});j.j({message:e.updatingPermissions})})),l()(this,"handleUpdateComplete",(()=>{j.x()})),l()(this,"handleTabClick",(e=>{const t=e;switch(t){case y.Members:V.qTS(this.environment,{tab:"members"});break;case y.Groups:V.qTS(this.environment,{tab:"groups"});break;case y.Guests:V.qTS(this.environment,{tab:"guests"});break;default:(0,tt.t1)(t)}this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,currentTab:e})})),l()(this,"handleCreateGroupClick",(()=>{N.H5(this.environment,(e=>{const t=S.mo({spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,editingNameGroupId:t.id,groupNameInputValue:""})})),V.O8v(this.environment)})),l()(this,"handleGroupReorder",(e=>{const t=this.props.store.getValue();if(t){const s=t.permission_groups||[],r=p().compact(e.map((e=>s.find((t=>t.id===e)))));N.H5(this.environment,(e=>{S.oD({spaceStore:this.props.store,groups:r,transaction:e})}))}V.HCh(this.environment)})),l()(this,"handleFilterChange",(e=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,groupsFilter:e.target.value})})),l()(this,"handleMembersShowMoreClick",(()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitMembers:!1})})),l()(this,"handleGuestsShowMoreClick",(()=>{this.stores.spacePermissionsSettingsStore.setState({...this.stores.spacePermissionsSettingsStore.state,limitGuests:!1})})),l()(this,"handleInviteLinkClick",(()=>{const e=!this.getInviteLinkEnabled();V.eoz(this.environment,{enabled:e}),N.H5(this.environment,(t=>{S.ys({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})}))})),l()(this,"handleUserHeaderClick",(()=>{this.handleSortClick("members","name")})),l()(this,"handleAccessLevelHeaderClick",(()=>{this.handleSortClick("members","role")})),l()(this,"handleSortClick",((e,t)=>{const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];let r;r=!(!s||s.by!==t)&&s.asc,this.stores.spacePermissionsSettingsStore.update((s=>({...s,sorts:{...s.sorts,[e]:{by:t,asc:!r}}})))})),l()(this,"handleMemberPermissionRoleChange",(async(e,t,s)=>{const{store:r}=this.props,o=this.environment.currentUser.id;if(e.userId===o&&"none"===t){await S.bf({environment:this.environment,spaceId:r.id,userSettingsStore:s})&&je.ZP.setState({...je.ZP.state,open:!1})}else this.handleUpdateClick(),"none"===t?(await A.XgZ(this.environment,{userIds:[e.userId],spaceId:r.id,removePagePermissions:!0,revokeUserTokens:!0}),await U.bi(this.environment)):await N.H5(this.environment,(s=>f.ep({environment:this.environment,store:r,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s}))),this.handleUpdateComplete()}))}renderComponent(){const{store:e,isMobile:t}=this.props;if(!Ve.Z.state.online)return this.renderOfflineMessage();const{data:s}=Y.Z.state;if(!s)return this.renderLoadingSpinner();const r=q.uF(s);if(!p().every(r.map((t=>P.Z.createChildStore(e,{table:g.KJ,id:t.userId}).isReady()))))return this.renderLoadingSpinner();const o=r.filter(u.CF),n=r.filter(u.du),{currentTab:a}=this.stores.spacePermissionsSettingsStore.state;if(t)return i()(c.Fragment,{},void 0,this.canAdmin()&&i()(G.Z,{shouldShowBottomDivider:!0},void 0,this.renderMobileInviteButton(),i()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteLink())),i()(G.Z,{},void 0,this.renderSpaceMembers(o)));const l=[i()(X._H,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members ({numberOfMembers})",values:{numberOfMembers:o.length}}),i()(X._H,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"})];return n.length>0&&l.push(i()(X._H,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests ({numberOfGuests})",values:{numberOfGuests:n.length}})),i()(oe.Z,{},void 0,i()(ie.Z,{tabs:l,selectedIndex:a,onChange:this.handleTabClick,style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabTitleStyle:{fontSize:16}}),this.renderTab(a,o,n))}renderLoadingSpinner(){return i()(Je.Z,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return i()(qe.Z,{isSmall:!0,style:{textAlign:"center"}},void 0,i()(X._H,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."}))}renderHelp(){return i()("div",{style:{marginTop:24,marginBottom:24}},void 0,i()(Ke.Z,{title:i()(X._H,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:(0,Qe.UY)("guides.members"),analyticsFrom:"members_settings"}))}renderTab(e,t,s){return e===y.Members?i()(c.Fragment,{},void 0,this.renderSpaceMembers(t)):e===y.Guests?i()(c.Fragment,{},void 0,this.renderSpaceGuests(s)):this.renderGroupsTab()}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=e.getValue(),r=this.canUseGroups(),n=this.canEditGroups();if(s){const e=s.permission_groups||[];return i()("div",{},void 0,r?i()(qe.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,i()(X._H,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})):i()(et.Z,{for:"team",from:"permission_groups",icon:K.Z.group,title:i()(X._H,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:i()(X._H,{id:"spacePermissionsSettings.groupsTab.upgradeCaption",defaultMessage:"Upgrade to the Team Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),i()(k.Z,{size:24,isHidden:!0}),i()("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},void 0,r&&i()(O.Z,{renderTooltip:()=>this.canAdmin()?i()(X._H,{id:"spacePermissionsSettings.groupsTab.upgradeMessage",defaultMessage:"Upgrade to Team or Enterprise to use permission groups."}):i()(X._H,{id:"spacePermissionsSettings.groupsTab.adminsOnly",defaultMessage:"Only admins can add a permission group."}),render:e=>m().createElement(Be.Z,o()({isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!n},n?void 0:e),i()(X._H,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"}))}),e.length>0&&i()(se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:K.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:se.Z.Format.Small,value:t,style:{...lt.filterStyle,marginRight:0},onChange:this.handleFilterChange})),e.length>0&&i()(k.Z,{size:24,style:{marginBottom:24}}),n?i()(Fe.Z,{direction:Fe.K.Vertical,keys:e.map((e=>e.id)),renderKey:(t,s)=>this.renderSpaceGroup(e[s]),isFullWidth:!0,onDrop:this.handleGroupReorder}):i()("div",{},void 0,e.map(this.renderSpaceGroup)))}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):i()("div",{},void 0,!this.shouldRenderUpsell()&&this.renderHelp(),this.shouldRenderUpsell()&&this.renderUpsell(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:s}=this.stores;return i()("div",{},void 0,i()("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"}},void 0,i()("div",{style:{marginRight:8,flexGrow:1}},void 0,i()($e.Z,{},void 0,i()(X._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})),i()(qe.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},void 0,i()(X._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only admins can see this."})," ",!this.props.isMobile&&this.renderInviteLinkReset())),i()("div",{style:{marginTop:5}},void 0,i()(Ye.Z,{on:t,onClick:this.handleInviteLinkClick}))),s&&t&&e&&this.renderInviteLinkUrl(e),i()(k.Z,{size:40}))}renderInviteLinkReset(){const{store:e}=this.props,t=e.getValue();if(t)return i()(X._H,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> for all space members to generate a new invite link.",values:{resetlink:(...e)=>i()(ze.Z,{onClick:()=>{E.vC({message:i()(X._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset the invite link for all space members? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:E.lo,items:[{label:i()(X._H,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await A.Kdm(this.environment,{spaceId:t.id}),U.bi(this.environment)}}]})}},void 0,e)}})}renderInviteLinkUrl(e){const{mobileNative:t}=this.environment,s=i()(X._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),r=()=>{Xe.RD({environment:this.environment,stringValue:e,copiedMessage:Xe.tq.copiedLinkToClipboard}),V.nlj(this.environment)},o=()=>{t&&t.share(e),V.nlj(this.environment)};return this.props.isMobile?i()("div",{},void 0,i()(se.Z,{type:"text",format:se.B.Default,value:e,disabled:!0}),t?i()(z.Z,{onClick:o,style:{marginTop:10,width:"100%"}},void 0,i()(X._H,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})):i()(z.Z,{onClick:r,style:{marginTop:10,width:"100%"}},void 0,s)):i()("div",{},void 0,i()("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12}},void 0,i()(se.Z,{type:"text",format:se.B.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),i()(Be.Z,{onClick:r,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,width:90},isLarge:!0},void 0,s)))}renderMobileMemberList(e){const{store:t}=this.props;return i()(c.Fragment,{},void 0,e.map((e=>{const s=P.Z.createChildStore(t,{table:g.KJ,id:e.userId}).getValue();return i()("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:"1px solid ".concat(this.theme.lightDividerColor),background:this.theme.cardContentBackground}},void 0,this.renderMember(s),i()("div",{style:{textAlign:"center",marginLeft:"auto"}},void 0,this.renderUserPermission(e)))})))}renderUpsell(){const{data:e}=Y.Z.state,t=e&&!q.Ln(this.environment,e)&&"subscribed_admin"!==e.type?"team_free":"team";return m().createElement(m().Fragment,null,i()(et.Z,{for:t,from:"members_settings",icon:K.Z.membersFilled,title:i()(X._H,{id:"spacePermissionSettings.memberUpsell.title",defaultMessage:"Share with unlimited members"}),caption:i()(X._H,{id:"spacePermissionSettings.memberUpsell.caption",defaultMessage:"Try Notion for Teams for a collaborative workspace, unlimited team members, and advanced permissions."}),learnMoreRoute:"guides.members",upgradeMessage:i()(X._H,"team_free"===t?{id:"spacePermissionSettings.memberUpsell.alternativeTrialLabel",defaultMessage:"Try it free"}:{id:"spacePermissionSettings.memberUpsell.alternativeUpgradeLabel",defaultMessage:"Upgrade to Team Plan"})}),i()(k.Z,{size:48}))}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:r}=t.state,o=this.getFilteredMembers(e,s),n=this.sortUsers("members",o),a=r?n.slice(0,lt.defaultLimit):n;return i()(m().Fragment,{},void 0,i()("div",{style:{marginRight:8,flexGrow:1}},void 0,i()($e.Z,{},void 0,i()(X._H,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"}))),this.renderInviteViaDomainCaption(),i()(k.Z,{size:16,isHidden:!0}),i()("div",{},void 0,i()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,this.renderInviteButton(),i()(se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:K.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:se.Z.Format.Small,value:s,style:lt.filterStyle,onChange:e=>{t.setState({...t.state,membersFilter:e.target.value,limitMembers:!0})}})),this.renderUserTable("members",a),n.length>lt.defaultLimit&&r&&i()(We.Z,{style:lt.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick},void 0,i()(X._H,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:n.length-lt.defaultLimit}}))))}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:r}=t.state,o=this.getFilteredMembers(e,s),n=this.sortUsers("guests",o),a=r?n.slice(0,lt.defaultLimit):n;return i()("div",{},void 0,i()("div",{},void 0,i()("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},void 0,i()(se.Z,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:K.Z.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:se.Z.Format.Small,value:s,style:lt.filterStyle,onChange:e=>{t.setState({...t.state,guestsFilter:e.target.value,limitGuests:!0})}})),this.renderUserTable("guests",a),n.length>lt.defaultLimit&&r&&i()(We.Z,{style:lt.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick},void 0,i()(X._H,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:n.length-lt.defaultLimit}}))))}renderMobileInviteButton(){return i()(c.Fragment,{},void 0,i()("div",{style:this.mobileMenuItemStyle()},void 0,this.renderInviteButton({flex:1})),i()("div",{style:{borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}))}renderInviteButton(e){const{store:t}=this.props;return i()(st.r1,{disabled:!this.canAdmin(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e})}renderInviteViaDomainCaption(){const{store:e}=this.props;return S.LV(e)?i()(qe.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,i()(X._H,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})):i()("div",{},void 0,i()(qe.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginBottom:6}},void 0,i()(X._H,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:(...e)=>i()(ze.Z,{onClick:()=>{je.ZP.setState({...je.ZP.state,currentTab:"settings"})}},void 0,e)}})),i()(qe.Z,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},void 0,i()(X._H,{id:"spaceBasicSettings.membersTab.payPerMemberCaption",defaultMessage:"Note: you will be charged for each member added. Visit <billingguidelink>our guide</billingguidelink> for more information on how we bill.",values:{billingguidelink:(...e)=>i()(ze.Z,{href:(0,Qe.UY)("guides.billingGuide")},void 0,e)}})))}getFilteredMembers(e,t){const{store:s}=this.props;return t&&t.length>0?(0,_.ZP)(t,e,(e=>{const t=P.Z.createChildStore(s,{table:g.KJ,id:e.userId}).getValue();return t?(0,g.of)(t):""})):e}sortUsers(e,t){const s=this.stores.spacePermissionsSettingsStore.state.sorts[e];if(!s)return t;const{store:r}=this.props;switch(s.by){case"role":return t.sort(((e,t)=>(h.xm[t.role]-h.xm[e.role])*(s.asc?-1:1)));case"name":return t.map((e=>({user:e,store:P.Z.createChildStore(r,{table:g.KJ,id:e.userId})}))).sort(((e,t)=>{const r=e.store.getValue(),o=t.store.getValue(),n=(0,g.Nz)(this.props.intl,r),i=(0,g.Nz)(this.props.intl,o);return n.localeCompare(i)*(s.asc?1:-1)})).map((e=>e.user))}}renderSmallArrow(e){const{up:t}=e,s={width:10,height:10,marginLeft:4};return t?K.Z.arrowDownSmall({...s,transform:"rotate(180deg)"}):K.Z.arrowDownSmall(s)}renderUserTable(e,t){const{store:s}=this.props,r=this.stores.spacePermissionsSettingsStore.state.sorts[e],o="on"===it.Z.getGroup("workspace-user-sort-and-filter");return i()(ne.Z,{columns:[{key:"user",header:i()(nt.Z,{disabled:!o,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"name")},style:{display:"flex",alignItems:"center"}},void 0,i()(X._H,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),r&&"name"===r.by?this.renderSmallArrow({up:r.asc}):null),style:{width:"75%"}},{key:"access_level",header:i()(nt.Z,{disabled:!o,ignoreLocalHoverState:!0,onClick:()=>{this.handleSortClick(e,"role")},style:{display:"flex",alignItems:"center",justifyContent:"center"}},void 0,i()(X._H,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),r&&"role"===r.by?this.renderSmallArrow({up:r.asc}):null),style:{width:"25%",textAlign:"center"}}],rows:t.map((e=>({member:e,store:P.Z.createChildStore(s,{table:g.KJ,id:e.userId})}))).filter((e=>void 0!==e.store.getValue())).map((e=>{const{member:t,store:s}=e,r=s.getValue();return{key:t.userId,columns:[this.renderMember(r),i()("div",{style:{textAlign:"center"}},void 0,this.renderUserPermission(t))]}}))})}renderMember(e){return i()(ot.Z,{userValue:e})}renderUserPermission(e){return"none"===e.role?i()(te,{store:this.props.store,guest:e,isSubscribed:this.isSubscribed()}):this.renderMemberRoleSelect(e)}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s}=He.Z.state;if(s)return i()(re.Z,{role:e.role,table:ae.bx,type:"user_permission",disabled:!this.canAdmin(),isUserPermission:e.userId===t,isSubscribed:this.isSubscribed(),upgradeButtonName:"space_permission_item",onChange:t=>this.handleMemberPermissionRoleChange(e,t,s)})}isSubscribed(){const{data:e}=Y.Z.state;return Boolean(e&&q.YK(e))}canAdmin(){return this.props.store.canAdmin()}canUseGroups(){return q.qF(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canAdmin()}canUseInviteLink(){return this.canAdmin()&&q.qF(this.environment)}shouldRenderUpsell(){const e=this.props.store.getValue();return Boolean(e&&"personal"===e.plan_type&&this.canAdmin())}getInviteLinkEnabled(){const e=this.props.store.getValue();return Boolean(e&&e.invite_link_enabled)}getInviteLink(){const e=Y.Z.state.data,t=this.props.store.id,s=!e||"subscribed_admin"!==e.type&&"unsubscribed_admin"!==e.type?void 0:e.inviteLinkCode;if(s)return(0,rt.createSpaceInviteLinkUrl)(this.environment,t,s)}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.cardContentBackground}}}l()(lt,"defaultLimit",50),l()(lt,"filterStyle",{maxWidth:250,borderRadius:30}),l()(lt,"showMoreButtonStyle",{marginTop:8});const dt=(0,X.XN)(lt);at.performance&&at.performance.mark&&at.performance.mark("src_client_components_SpacePermissionsSettings_tsx_end"),at.performance&&at.performance.measure&&at.performance.measure("src_client_components_SpacePermissionsSettings_tsx","src_client_components_SpacePermissionsSettings_tsx_start","src_client_components_SpacePermissionsSettings_tsx_end")},78142:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(52264),o=s.n(r),n=(s(54651),s(68268)),i=s(30873),a=s(5489),l=s(61149),d=s(68195),p=s(30944),c="object"==typeof s.g?s.g:window;c.performance&&c.performance.mark&&c.performance.mark("src_client_components_SubscriptionSettings_tsx_start");class m extends i.Z{renderComponent(){return o()("div",{},void 0,this.renderHeader(),o()("div",{style:this.getSettingsOptionStyle()},void 0,o()(d.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},void 0,this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this.environment;return o()(l.Z,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},void 0,o()(n._H,{id:"subscriptionSettings.title",defaultMessage:"Subscription"}))}renderMessage(){const{device:e}=this.environment;return e.isMobile?o()(n._H,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."}):o()(n._H,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."})}renderManageSubscriptionButton(){return o()(p.Z,{href:"https://apps.apple.com/account/subscriptions"},void 0,o()(a.Z,{isLarge:!0,style:{marginTop:12,marginBottom:4}},void 0,o()(n._H,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const u=m;c.performance&&c.performance.mark&&c.performance.mark("src_client_components_SubscriptionSettings_tsx_end"),c.performance&&c.performance.measure&&c.performance.measure("src_client_components_SubscriptionSettings_tsx","src_client_components_SubscriptionSettings_tsx_start","src_client_components_SubscriptionSettings_tsx_end")},71169:(e,t,s)=>{s.d(t,{Z:()=>l});var r=s(43629),o=s.n(r),n=(s(62537),s(30873)),i="object"==typeof s.g?s.g:window;i.performance&&i.performance.mark&&i.performance.mark("src_client_components_Swipe_tsx_start");class a extends n.Z{constructor(...e){super(...e),o()(this,"touchX",void 0),o()(this,"handleTouchStart",(e=>{this.touchX=e.touches[0].clientX})),o()(this,"handleTouchMove",(e=>{if(void 0===this.touchX)return;const t=this.props.threshold||120,s=this.touchX-e.touches[0].clientX;s>t&&this.props.onSwipeLeft&&(this.props.onSwipeLeft(),this.touchX=void 0),s<-1*t&&this.props.onSwipeRight&&(this.props.onSwipeRight(),this.touchX=void 0)})),o()(this,"handleTouchEnd",(()=>{this.touchX=void 0})),o()(this,"handleTouchCancel",(()=>{this.touchX=void 0}))}renderComponent(){return this.props.render({onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel})}}const l=a;i.performance&&i.performance.mark&&i.performance.mark("src_client_components_Swipe_tsx_end"),i.performance&&i.performance.measure&&i.performance.measure("src_client_components_Swipe_tsx","src_client_components_Swipe_tsx_start","src_client_components_Swipe_tsx_end")},68646:(e,t,s)=>{s.d(t,{Z:()=>m});var r=s(52264),o=s.n(r),n=s(43629),i=s.n(n),a=(s(54651),s(30873)),l=s(68195),d=s(32823),p="object"==typeof s.g?s.g:window;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_TableBox_tsx_start");class c extends a.Z{renderComponent(){const{columns:e,rows:t}=this.props;return o()("table",{style:this.getStyle()},void 0,o()("thead",{},void 0,o()("tr",{style:c.headerRowStyle},void 0,e.map((e=>o()("th",{style:{...c.tableHeaderStyle,...e.style}},e.key,o()(l.Z,{isSmall:!0},void 0,e.header)))))),o()("tbody",{},void 0,t.map((t=>o()("tr",{style:this.getRowStyle()},t.key,t.columns.map(((t,s)=>{const r=e[s];return o()("td",{style:c.cellStyle},r.key,t)})))))))}getStyle(){return{width:"100%",fontSize:13,borderTop:"1px solid ".concat(this.theme.regularDividerColor),borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}getRowStyle(){return{width:"100%",borderTop:"1px solid ".concat(this.theme.regularDividerColor)}}}i()(c,"cellPaddingTopBottom",8),i()(c,"headerRowStyle",{height:32,width:"100%"}),i()(c,"tableHeaderStyle",{fontWeight:d.Z.fontWeight.regular,textAlign:"left",paddingTop:c.cellPaddingTopBottom,paddingBottom:c.cellPaddingTopBottom}),i()(c,"cellStyle",{paddingTop:c.cellPaddingTopBottom,paddingBottom:c.cellPaddingTopBottom});const m=c;p.performance&&p.performance.mark&&p.performance.mark("src_client_components_TableBox_tsx_end"),p.performance&&p.performance.measure&&p.performance.measure("src_client_components_TableBox_tsx","src_client_components_TableBox_tsx_start","src_client_components_TableBox_tsx_end")},13148:(e,t,s)=>{s.d(t,{Z:()=>_});var r=s(52264),o=s.n(r),n=s(43629),i=s.n(n),a=(s(62537),s(54651),s(30873)),l=s(95683),d=s(5489),p=s(14611),c=s(24475),m=s(65297),u=s(93022),h=s(32823),g=s(68268),f="object"==typeof s.g?s.g:window;f.performance&&f.performance.mark&&f.performance.mark("src_client_components_UpsellCallout_tsx_start");class S extends a.Z{constructor(...e){super(...e),i()(this,"handleUpgradeClick",(e=>{const{from:t,for:s,onUpgradeClick:r}=this.props;m.y(this.environment,{from:t,for:s}),r&&r(e)})),i()(this,"handleLearnMoreClick",(()=>{const{from:e,learnMoreRoute:t}=this.props;(0,u.Db)({environment:this.environment,url:(0,p.UY)(t)}),c.Fsx(this.environment,{from:e})}))}renderComponent(){return o()("section",{style:this.getWrapStyle()},void 0,this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions())}renderIcon(){const{icon:e}=this.props;return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return o()("header",{style:this.getTitleStyle()},void 0,e)}renderCaption(){const{caption:e}=this.props;return o()("p",{style:this.getCaptionStyle()},void 0,e)}renderActions(){return o()("footer",{},void 0,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return o()(l.Z,{onClick:this.handleUpgradeClick,isLarge:!0},void 0,e||o()(g._H,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return o()(d.Z,{onClick:this.handleLearnMoreClick,style:this.getLearnMoreButtonStyle()},void 0,o()(g._H,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}getWrapStyle(){const{device:e}=this.environment;return{fontSize:14,...!e.isMobile&&{maxWidth:340}}}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:h.Z.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getLearnMoreButtonStyle(){return{marginLeft:12}}}const _=S;f.performance&&f.performance.mark&&f.performance.mark("src_client_components_UpsellCallout_tsx_end"),f.performance&&f.performance.measure&&f.performance.measure("src_client_components_UpsellCallout_tsx","src_client_components_UpsellCallout_tsx_start","src_client_components_UpsellCallout_tsx_end")},35248:(e,t,s)=>{s.d(t,{Z:()=>y});var r=s(52264),o=s.n(r),n=s(43629),i=s.n(n),a=(s(62537),s(54651),s(68268)),l=s(30873),d=s(68195),p=s(3715),c=s(49043),m=s(86165),u=s(28987),h=s(63132),g=s(54399),f=s(95799),S=s(5489),_=s(61149),v="object"==typeof s.g?s.g:window;v.performance&&v.performance.mark&&v.performance.mark("src_client_components_UserDataConsentSettings_tsx_start");class b extends l.Z{constructor(...e){super(...e),i()(this,"storeTypes",{requestStore:p.Z}),i()(this,"renderResult",((e,t,s)=>o()(u.Z,{loaded:s,spinnerSize:16,showSpinnerTimeout:600},void 0,e||!t?o()("div",{},void 0,this.props.intl.formatMessage({id:"userDataConsent.render.error",defaultMessage:"Something went wrong"})):this.renderOutput(t)))),i()(this,"renderOutput",(e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return o()("div",{style:this.getSettingsOptionStyle()},void 0,o()("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,width:"100%"}},void 0,o()("div",{style:{flex:1}},void 0,o()(_.Z,{},void 0,o()(a._H,{id:"userDataConsentSettings.header.label",defaultMessage:"Support access"})),o()(d.Z,{isSmall:!0,isMultiline:!0,style:{marginTop:4,width:"80%"}},void 0,t&&e.expiryTime?o()(a._H,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:f.Z.unix(e.expiryTime/1e3).locale(this.props.intl.locale).format("lll")}}):o()(a._H,{id:"userDataConsentSettings.accessNotGranted.label",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."})),o()(S.Z,{onClick:s,isLarge:!0,style:{marginTop:12,marginBottom:4}},void 0,o()(a._H,t?{id:"userDataConsentSettings.revokeSupportAccess.button",defaultMessage:"Revoke access"}:{id:"userDataConsentSettings.allowSupportAccess.button",defaultMessage:"Allow support access"})))))})),i()(this,"fetchUserDataConsentSettings",(async e=>{const t=await g.Zmw(this.environment,{});if("failed"===t.type)throw t.error;return t.data})),i()(this,"grantDataAccess",(async()=>{await this.setDataAccessExpiryTime({expiryTime:Date.now()+14*c.A0})})),i()(this,"revokeDataAccess",(async()=>{await this.setDataAccessExpiryTime({})})),i()(this,"setDataAccessExpiryTime",(async e=>{const t=await g.VK_(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState({...e,result:t.data})}}))}renderComponent(){const{currentUserStore:e}=h.Z.state;return e&&o()(m.Z,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+14*c.A0},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}const y=(0,a.XN)(b);v.performance&&v.performance.mark&&v.performance.mark("src_client_components_UserDataConsentSettings_tsx_end"),v.performance&&v.performance.measure&&v.performance.measure("src_client_components_UserDataConsentSettings_tsx","src_client_components_UserDataConsentSettings_tsx_start","src_client_components_UserDataConsentSettings_tsx_end")},9261:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(7554),o="object"==typeof s.g?s.g:window;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_GlobalCsatPopupStore_ts_start");class n extends r.Z{getInitialState(){return{open:!1}}}const i=new n;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_GlobalCsatPopupStore_ts_end"),o.performance&&o.performance.measure&&o.performance.measure("src_client_stores_GlobalCsatPopupStore_ts","src_client_stores_GlobalCsatPopupStore_ts_start","src_client_stores_GlobalCsatPopupStore_ts_end")},52369:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(7554),o="object"==typeof s.g?s.g:window;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_GlobalEnterpriseContactModalStore_tsx_start");class n extends r.Z{getInitialState(){return{open:!1}}}const i=new n;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_GlobalEnterpriseContactModalStore_tsx_end"),o.performance&&o.performance.measure&&o.performance.measure("src_client_stores_GlobalEnterpriseContactModalStore_tsx","src_client_stores_GlobalEnterpriseContactModalStore_tsx_start","src_client_stores_GlobalEnterpriseContactModalStore_tsx_end")},87013:(e,t,s)=>{s.d(t,{F:()=>n,Z:()=>a});var r=s(7554),o="object"==typeof s.g?s.g:window;let n;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_SidebarCreateTeamModalStore_ts_start"),function(e){e[e.Team=0]="Team",e[e.Members=1]="Members"}(n||(n={}));class i extends r.Z{getInitialState(){return{open:!1,screen:n.Team,description:"",name:"",icon:void 0}}}const a=new i;o.performance&&o.performance.mark&&o.performance.mark("src_client_stores_SidebarCreateTeamModalStore_ts_end"),o.performance&&o.performance.measure&&o.performance.measure("src_client_stores_SidebarCreateTeamModalStore_ts","src_client_stores_SidebarCreateTeamModalStore_ts_start","src_client_stores_SidebarCreateTeamModalStore_ts_end")}}]);